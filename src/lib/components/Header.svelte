<script>
    import 'bootstrap/dist/css/bootstrap-grid.min.css';
    import 'bootstrap/dist/css/bootstrap-utilities.min.css'
	import { gsap } from 'gsap';
	import { onMount } from 'svelte';
	import CallBack from './CallBack.svelte';

	let header;
    export let phone;

	function setBurger() {
		gsap.set('.header__menu li a span', {
			yPercent: 100
		});

		gsap.set(header, {
			width: '150px',
			height: 'calc(28px + (2*10px))'
		});
	}

	function toggleBurger() {
		if (header.classList.contains('active')) {
			deactivateBurger();
		} else {
			activateBurger();
		}
	}

	function activateBurger() {
		header.classList.add('active');
		const tl = gsap.timeline();

		tl.to(header, {
			width: '300px',
			height: '300px',
			stagger: 0.1
		})
			.to(
				'.burger-menu',
				{
					delay: 0,
					backgroundColor: 'transparent',
					duration: 0
				},
				'<'
			)
			.to(
				'.burger-menu p span',
				{
					delay: 0,
					duration: 0.2,
					yPercent: -100
				},
				'<'
			)
			.to('.header__menu li a span', {
				yPercent: 0
			});
	}

	function deactivateBurger() {
		header.classList.remove('active');

		const tl = gsap.timeline();

		tl.to('.header__menu li a span', {
			yPercent: 100
		})
			.to('.burger-menu p span', {
				delay: 0,
				duration: 0.2,
				yPercent: 0
			})
			.to(header, {
				width: '150px',
				height: 'calc(28px + (2*10px))',
				stagger: 0.1
			});
	}

	onMount(() => {
		setBurger();
	});
</script>

<!-- svelte-ignore a11y_interactive_supports_focus -->
<!-- svelte-ignore a11y_click_events_have_key_events -->
<div>
<header
	id="header"
	bind:this={header}
	class="invisible"
	onclick={() => {
		toggleBurger();
	}}
	role="button"
>
	<div class="container">
		<div class="header-wrap">
			<div class="burger-wrap">
				<nav>
					<ul class="header__menu">
						<li>
							<a href="/"><span>Главная</span></a>
						</li>
						<li>
							<a href="/about"><span>О нас</span></a>
						</li>
						<li>
							<a href="/service"><span>услуги</span></a>
						</li>
						<li>
							<a href="/cases"><span>кейсы</span></a>
						</li>
						<li>
							<a href="/media"><span>медиа</span></a>
						</li>
						<li>
							<a href="/contact"><span>Контакт</span></a>
						</li>
					</ul>
				</nav>
			</div>
            <div class="burger-wrapper">
                <div class="burger-menu">
                    <div class="burger">
                        <span></span><span></span><span></span>
                    </div>
                </div>
                <div class="cdu-header-logo">
    <svg width="65" height="42" viewBox="0 0 65 42" fill="none" xmlns="http://www.w3.org/2000/svg">
<mask id="path-1-outside-1_2098_624" maskUnits="userSpaceOnUse" x="0" y="0" width="65" height="42" fill="black">
<rect fill="white" width="65" height="42"/>
<path d="M1 40.5882V35.1176H2.01199V10.8235C2.01199 9.92177 2.1114 9.25471 2.30963 8.82353C2.50786 8.39235 2.90492 8.01941 3.50021 7.70588C4.0955 7.39235 5.10749 7.03942 6.53618 6.64706V6.47059H1V1H8.97687V6.47059H7.96488V17.6471H8.14347C8.6197 15.3335 9.3144 13.6076 10.227 12.4706C11.1396 11.3335 12.37 10.7647 13.9178 10.7647C15.4655 10.7647 16.5769 11.3335 17.2514 12.4706C17.9657 13.5688 18.3229 15.3924 18.3229 17.9412V30.7059C18.3229 31.6076 18.2235 32.2941 18.0253 32.7647C17.827 33.1959 17.43 33.5688 16.8347 33.8824C16.2394 34.1959 15.2274 34.5488 13.7987 34.9412V35.1176H19.2158V40.5882H11.5961V35.1176H12.37V19.6471C12.37 18.4312 12.251 17.6076 12.0128 17.1765C11.7747 16.7059 11.358 16.4706 10.7627 16.4706C9.49298 16.4706 8.56017 17.7453 7.96488 20.2941V35.1176H8.73875V40.5882H1ZM19.6968 40.5882V35.1176H20.6493V16.6471H19.6968V11.1765H23.1495C24.4984 11.1765 25.4116 11.51 25.8878 12.1765C26.3641 12.8429 26.6022 14.0194 26.6022 15.7059V17.4118H26.7808C27.1772 15.1371 27.7927 13.4706 28.6262 12.4118C29.4988 11.3135 30.6698 10.7647 32.1384 10.7647C33.6063 10.7647 34.6779 11.2941 35.3529 12.3529C36.0673 13.4118 36.4244 15.0982 36.4244 17.4118H36.603C36.9995 15.1371 37.615 13.4706 38.4484 12.4118C39.3211 11.3135 40.4921 10.7647 41.9606 10.7647C43.5084 10.7647 44.5995 11.3335 45.2347 12.4706C45.9092 13.5688 46.2467 15.3924 46.2467 17.9412V30.7059C46.2467 31.6076 46.1473 32.2941 45.9491 32.7647C45.7502 33.1959 45.3538 33.5688 44.7585 33.8824C44.1632 34.1959 43.1512 34.5488 41.7225 34.9412V35.1176H47.1396V40.5882H39.5199V35.1176H40.2938V19.7647C40.2938 18.51 40.1944 17.6471 39.9962 17.1765C39.7973 16.7059 39.4402 16.4706 38.9247 16.4706C37.7734 16.4706 36.94 17.7841 36.4244 20.4118V35.1176H37.1983V40.5882H29.6977V35.1176H30.4716V19.7647C30.4716 18.51 30.3721 17.6471 30.1739 17.1765C29.9751 16.7059 29.6179 16.4706 29.1024 16.4706C27.9511 16.4706 27.1177 17.7841 26.6022 20.4118V35.1176H27.3761V40.5882H19.6968ZM52.2133 41C48.8404 41 47.1533 38.3135 47.1533 32.9412C47.1533 29.7647 47.8081 27.4706 49.1178 26.0588C50.4673 24.6077 52.4121 23.8824 54.9516 23.8824C55.785 23.8824 56.4797 23.9218 57.0351 24V20.0588C57.0351 18.5294 56.9363 17.51 56.7375 17C56.5791 16.4512 56.2416 16.1765 55.7255 16.1765C55.1302 16.1765 54.7135 16.49 54.4754 17.1176C54.2373 17.7059 54.1182 18.7841 54.1182 20.3529H48.1653C48.1653 17.2159 48.8005 14.8429 50.0702 13.2353C51.3406 11.5882 53.2455 10.7647 55.785 10.7647C58.3251 10.7647 60.1509 11.5294 61.2617 13.0588C62.413 14.5488 62.988 16.9606 62.988 20.2941V35.1176H64V40.5882H60.5473C59.1984 40.5882 58.2656 40.2547 57.7495 39.5882C57.2732 38.9218 57.0351 37.7453 57.0351 36.0588V33.9412H56.8565C56.4994 36.49 55.9636 38.3135 55.2493 39.4118C54.5748 40.4706 53.5628 41 52.2133 41ZM54.8921 35.0588C55.5671 35.0588 56.0827 34.3724 56.4398 33C56.8369 31.6277 57.0351 29.7059 57.0351 27.2353V24.7647C55.8053 24.9606 54.8724 25.5688 54.2373 26.5882C53.642 27.5688 53.3443 29.0782 53.3443 31.1176C53.3443 32.5294 53.4634 33.5488 53.7015 34.1765C53.9396 34.7647 54.3367 35.0588 54.8921 35.0588Z"/>
</mask>
<path d="M1 40.5882V35.1176H2.01199V10.8235C2.01199 9.92177 2.1114 9.25471 2.30963 8.82353C2.50786 8.39235 2.90492 8.01941 3.50021 7.70588C4.0955 7.39235 5.10749 7.03942 6.53618 6.64706V6.47059H1V1H8.97687V6.47059H7.96488V17.6471H8.14347C8.6197 15.3335 9.3144 13.6076 10.227 12.4706C11.1396 11.3335 12.37 10.7647 13.9178 10.7647C15.4655 10.7647 16.5769 11.3335 17.2514 12.4706C17.9657 13.5688 18.3229 15.3924 18.3229 17.9412V30.7059C18.3229 31.6076 18.2235 32.2941 18.0253 32.7647C17.827 33.1959 17.43 33.5688 16.8347 33.8824C16.2394 34.1959 15.2274 34.5488 13.7987 34.9412V35.1176H19.2158V40.5882H11.5961V35.1176H12.37V19.6471C12.37 18.4312 12.251 17.6076 12.0128 17.1765C11.7747 16.7059 11.358 16.4706 10.7627 16.4706C9.49298 16.4706 8.56017 17.7453 7.96488 20.2941V35.1176H8.73875V40.5882H1ZM19.6968 40.5882V35.1176H20.6493V16.6471H19.6968V11.1765H23.1495C24.4984 11.1765 25.4116 11.51 25.8878 12.1765C26.3641 12.8429 26.6022 14.0194 26.6022 15.7059V17.4118H26.7808C27.1772 15.1371 27.7927 13.4706 28.6262 12.4118C29.4988 11.3135 30.6698 10.7647 32.1384 10.7647C33.6063 10.7647 34.6779 11.2941 35.3529 12.3529C36.0673 13.4118 36.4244 15.0982 36.4244 17.4118H36.603C36.9995 15.1371 37.615 13.4706 38.4484 12.4118C39.3211 11.3135 40.4921 10.7647 41.9606 10.7647C43.5084 10.7647 44.5995 11.3335 45.2347 12.4706C45.9092 13.5688 46.2467 15.3924 46.2467 17.9412V30.7059C46.2467 31.6076 46.1473 32.2941 45.9491 32.7647C45.7502 33.1959 45.3538 33.5688 44.7585 33.8824C44.1632 34.1959 43.1512 34.5488 41.7225 34.9412V35.1176H47.1396V40.5882H39.5199V35.1176H40.2938V19.7647C40.2938 18.51 40.1944 17.6471 39.9962 17.1765C39.7973 16.7059 39.4402 16.4706 38.9247 16.4706C37.7734 16.4706 36.94 17.7841 36.4244 20.4118V35.1176H37.1983V40.5882H29.6977V35.1176H30.4716V19.7647C30.4716 18.51 30.3721 17.6471 30.1739 17.1765C29.9751 16.7059 29.6179 16.4706 29.1024 16.4706C27.9511 16.4706 27.1177 17.7841 26.6022 20.4118V35.1176H27.3761V40.5882H19.6968ZM52.2133 41C48.8404 41 47.1533 38.3135 47.1533 32.9412C47.1533 29.7647 47.8081 27.4706 49.1178 26.0588C50.4673 24.6077 52.4121 23.8824 54.9516 23.8824C55.785 23.8824 56.4797 23.9218 57.0351 24V20.0588C57.0351 18.5294 56.9363 17.51 56.7375 17C56.5791 16.4512 56.2416 16.1765 55.7255 16.1765C55.1302 16.1765 54.7135 16.49 54.4754 17.1176C54.2373 17.7059 54.1182 18.7841 54.1182 20.3529H48.1653C48.1653 17.2159 48.8005 14.8429 50.0702 13.2353C51.3406 11.5882 53.2455 10.7647 55.785 10.7647C58.3251 10.7647 60.1509 11.5294 61.2617 13.0588C62.413 14.5488 62.988 16.9606 62.988 20.2941V35.1176H64V40.5882H60.5473C59.1984 40.5882 58.2656 40.2547 57.7495 39.5882C57.2732 38.9218 57.0351 37.7453 57.0351 36.0588V33.9412H56.8565C56.4994 36.49 55.9636 38.3135 55.2493 39.4118C54.5748 40.4706 53.5628 41 52.2133 41ZM54.8921 35.0588C55.5671 35.0588 56.0827 34.3724 56.4398 33C56.8369 31.6277 57.0351 29.7059 57.0351 27.2353V24.7647C55.8053 24.9606 54.8724 25.5688 54.2373 26.5882C53.642 27.5688 53.3443 29.0782 53.3443 31.1176C53.3443 32.5294 53.4634 33.5488 53.7015 34.1765C53.9396 34.7647 54.3367 35.0588 54.8921 35.0588Z" fill="#4A3AD9"/>
<path d="M1 40.5882V35.1176H2.01199V10.8235C2.01199 9.92177 2.1114 9.25471 2.30963 8.82353C2.50786 8.39235 2.90492 8.01941 3.50021 7.70588C4.0955 7.39235 5.10749 7.03942 6.53618 6.64706V6.47059H1V1H8.97687V6.47059H7.96488V17.6471H8.14347C8.6197 15.3335 9.3144 13.6076 10.227 12.4706C11.1396 11.3335 12.37 10.7647 13.9178 10.7647C15.4655 10.7647 16.5769 11.3335 17.2514 12.4706C17.9657 13.5688 18.3229 15.3924 18.3229 17.9412V30.7059C18.3229 31.6076 18.2235 32.2941 18.0253 32.7647C17.827 33.1959 17.43 33.5688 16.8347 33.8824C16.2394 34.1959 15.2274 34.5488 13.7987 34.9412V35.1176H19.2158V40.5882H11.5961V35.1176H12.37V19.6471C12.37 18.4312 12.251 17.6076 12.0128 17.1765C11.7747 16.7059 11.358 16.4706 10.7627 16.4706C9.49298 16.4706 8.56017 17.7453 7.96488 20.2941V35.1176H8.73875V40.5882H1ZM19.6968 40.5882V35.1176H20.6493V16.6471H19.6968V11.1765H23.1495C24.4984 11.1765 25.4116 11.51 25.8878 12.1765C26.3641 12.8429 26.6022 14.0194 26.6022 15.7059V17.4118H26.7808C27.1772 15.1371 27.7927 13.4706 28.6262 12.4118C29.4988 11.3135 30.6698 10.7647 32.1384 10.7647C33.6063 10.7647 34.6779 11.2941 35.3529 12.3529C36.0673 13.4118 36.4244 15.0982 36.4244 17.4118H36.603C36.9995 15.1371 37.615 13.4706 38.4484 12.4118C39.3211 11.3135 40.4921 10.7647 41.9606 10.7647C43.5084 10.7647 44.5995 11.3335 45.2347 12.4706C45.9092 13.5688 46.2467 15.3924 46.2467 17.9412V30.7059C46.2467 31.6076 46.1473 32.2941 45.9491 32.7647C45.7502 33.1959 45.3538 33.5688 44.7585 33.8824C44.1632 34.1959 43.1512 34.5488 41.7225 34.9412V35.1176H47.1396V40.5882H39.5199V35.1176H40.2938V19.7647C40.2938 18.51 40.1944 17.6471 39.9962 17.1765C39.7973 16.7059 39.4402 16.4706 38.9247 16.4706C37.7734 16.4706 36.94 17.7841 36.4244 20.4118V35.1176H37.1983V40.5882H29.6977V35.1176H30.4716V19.7647C30.4716 18.51 30.3721 17.6471 30.1739 17.1765C29.9751 16.7059 29.6179 16.4706 29.1024 16.4706C27.9511 16.4706 27.1177 17.7841 26.6022 20.4118V35.1176H27.3761V40.5882H19.6968ZM52.2133 41C48.8404 41 47.1533 38.3135 47.1533 32.9412C47.1533 29.7647 47.8081 27.4706 49.1178 26.0588C50.4673 24.6077 52.4121 23.8824 54.9516 23.8824C55.785 23.8824 56.4797 23.9218 57.0351 24V20.0588C57.0351 18.5294 56.9363 17.51 56.7375 17C56.5791 16.4512 56.2416 16.1765 55.7255 16.1765C55.1302 16.1765 54.7135 16.49 54.4754 17.1176C54.2373 17.7059 54.1182 18.7841 54.1182 20.3529H48.1653C48.1653 17.2159 48.8005 14.8429 50.0702 13.2353C51.3406 11.5882 53.2455 10.7647 55.785 10.7647C58.3251 10.7647 60.1509 11.5294 61.2617 13.0588C62.413 14.5488 62.988 16.9606 62.988 20.2941V35.1176H64V40.5882H60.5473C59.1984 40.5882 58.2656 40.2547 57.7495 39.5882C57.2732 38.9218 57.0351 37.7453 57.0351 36.0588V33.9412H56.8565C56.4994 36.49 55.9636 38.3135 55.2493 39.4118C54.5748 40.4706 53.5628 41 52.2133 41ZM54.8921 35.0588C55.5671 35.0588 56.0827 34.3724 56.4398 33C56.8369 31.6277 57.0351 29.7059 57.0351 27.2353V24.7647C55.8053 24.9606 54.8724 25.5688 54.2373 26.5882C53.642 27.5688 53.3443 29.0782 53.3443 31.1176C53.3443 32.5294 53.4634 33.5488 53.7015 34.1765C53.9396 34.7647 54.3367 35.0588 54.8921 35.0588Z" stroke="white" stroke-opacity="0.15" stroke-width="2" mask="url(#path-1-outside-1_2098_624)"/>
</svg>
</div>
            </div>
		</div>
	</div>
</header>
<CallBack {phone} hiddenFields={['email', 'note']} />
</div>

<style lang="scss">
	.word {
		overflow: hidden;
	}

	.line {
		overflow: hidden;
		line-height: 0.7;
	}
	.header {
		&-wrap {
			display: flex;
			flex-direction: column;
			height: 100%;
			max-height: 300px;
			position: relative;
		}
		&__menu {
			display: flex;
			flex-direction: column;
			gap: 16px;

			li a {
				display: block;
				overflow: hidden;
				width: fit-content;
				span {
					display: block;
					color: #4A3AD9;
					font-weight: 300;
					font-size: 20px;
					white-space: nowrap;
					text-transform: uppercase;
					position: relative;
					z-index: 10;
				}
			}
		}
		&__links {
			display: flex;
			gap: 16px;
			font-size: min(1.5vw, 16px);
			@media (max-width: 1139.9px) {
				font-size: min(1.8vw, 15px);
			}

			a {
				flex: 0 0 100%;
				font-size: min(4.5vw, 22px);
				white-space: nowrap;
			}
			.no-color {
				background-color: #fff;
				color: var(--accent-color);
				display: -webkit-box;
				display: -ms-flexbox;
				display: flex;
				justify-content: center;
				align-items: center;
			}
		}
	}

	.burger {
		width: 42px;
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		flex-direction: column;
		gap: 13px;

		span {
			height: 2px;
			background-color: #4A3AD9;
			border-radius: var(--border-radius);
			overflow: hidden;
			transition: all 0.5s ease;
		}
		&-wrap {
			position: absolute;
			top: 40px;
			left: 0;
			background-color: transparent;
			padding: 20px 15px;
			width: calc(100vw - 20px);
			height: 40vh;
			flex-direction: column;
			justify-content: space-between;
			align-items: flex-start;
			border-radius: 10px;
		}

		&-menu {
			position: absolute;
			top: 0;
			left: 0;
			padding: 10px 15px;
			width: 100%;
			display: flex;
			align-items: center;
			justify-content: space-between;
			transition: all 0.5s ease;

			p {
				display: block;
				overflow: hidden;
				span {
					display: block;
					color: #FFF;
					font-weight: 300;
					font-size: 20px;
					white-space: nowrap;
					transition: all 0.5s ease;
				}
			}
		}
	}
	.color {
		color: #333333;
		border-radius: 5px;
		background: rgba(38, 38, 38, 0.05);
		padding: 7px 12px;
		font-weight: 300;
	}

	.no-color {
		color: #fff;
		border-radius: 5px;
		background: #333333;
		padding: 7px 12px;
		font-weight: 300;
	}

	#header {
		position: fixed;
		top: 30px;
		left: 30px;
		width: 150px;
		overflow: hidden;
		border-radius: 10px;
		height: 48px;
		z-index: 10;
		max-width: 500px;
		transition: all 0.5s ease;

		@media (max-width: 767px) {
			max-width: calc(100% - 60px);
            top: 10px;
            left: 0;
		}

		&:global(.invisible) {
			opacity: 0;
			visibility: hidden;
		}

		&:global(.active) {
			.burger-menu {
				padding: 20px 15px;
			}
			.burger span {
				&:nth-child(2) {
					opacity: 0;
				}
				&:nth-child(1) {
					transform: rotate(45deg) translate(5px, 5px);
				}
				&:nth-child(3) {
					transform: rotate(-45deg) translate(16px, -16px);
				}
			}
		}
		.container {
			padding: 0;
		}
	}
    .cdu-header-logo {
        position: fixed;
        z-index: 10;
        top: 35px;
        left: 110px;
        @media(max-width:767px) {
            top: 10px;
            left: 70px;
        }
    }
</style>
